# 论文绘图
## 01.图例

1.1 改变图例中符号大小

```matlab
% 绘图
plot(1:10,'.');
% 调整图例中符号大小
[a,b,c,d]=legend('HappyLaber');
for i=1:length(b)
    if sum(strcmp(properties(b(i)),'MarkerSize'))
       b(i).MarkerSize=20;
    end
end
```

<img src="..\..\_static\010.png" alt="010" style="zoom:10%;" />

1.2 为图例添加标题

```matlab
lgd=legend;
lgd.Title.String='HappyLaber';
```

<img src="..\..\_static\012.png" alt="010" style="zoom:10%;" />

1.3 共用图例

```matlab
% 布局
h=tiledlayout(1,2);
ax1=nexttile(1);
plot(1:10);
ax2=nexttile(2);
plot(1:10);
% 共用图例
lgd=legend('y=x');
lgd.Layout.Tile = 'north';
```

<img src="..\..\_static\013.png" alt="010" style="zoom:10%;" />

1.4 画两个图例

```matlab
% 数据
a=0:0.01:10;
y1=sin(a);
y2=cos(a);
% 绘图
p=plot(a,[y1;y2]);
% 图例
legend(p(1),'y=sinx');
ax=axes('position',get(gca,'position'),'visible','off');
legend(ax,p(2),'y=cosx','Location','northwest');
```

<img src="..\..\_static\011.png" alt="010" style="zoom:10%;" />

## 02.布局

```matlab
% 布局
h=tiledlayout(2,2);
% 图1
ax1=nexttile([1 2]);
% 图2
ax2=nexttile([1 1]);
% 图3
ax3=nexttile([1 1]);
```

<img src="..\..\_static\009.png" alt="009" style="zoom:10%;" />

## 02.色标

2.1 共用色标

```matlab
% 加载数据
Z1=peaks(50);
Z2=peaks(50);
% 布局
h=tiledlayout(2,2);
h.TileSpacing='none';% 图块间距
h.Padding='compact'; % 布局周围补白
h.Title.String='Title';
% 图1
ax1=nexttile([1 2]);
contourf(Z1);
xticklabels([]);
% 图2
ax2=nexttile([1 2]);
contourf(Z2);
% colorbar
h=colorbar;
h.Layout.Tile ='east';
h.Label.String='H/m';
h.Label.Rotation=0;
h.Label.Position=[0.48,6.8,0];
colormap(jet(12));
caxis([-6,6]);
```

<img src="..\..\_static\002.png" alt="014" style="zoom:10%;" />

2.2 定制色标

```matlab
% 数据
[x,y,z]=peaks(50);
% 绘图
surf(x,y,z);
% 定制色标
colorbar;
cmap=zeros(20,3);
cmap(1:8,:)=repmat([0.5529 0.8275 0.7804],8,1);
cmap(9:20,:)=repmat([0.9843 0.7059 0.6824],12,1);
colormap(cmap);
caxis([-10,10]);
```

<img src="..\..\_static\003.png" alt="002" style="zoom:50%;" />

## 03.背景

```matlab
% 复杂填充需要借助v=fliplr(u);
h1=fill([0,2,2,0],[-1,-1,5,5],[0.651 0.8078 0.8902]);
h1.EdgeColor='none';
```

## 04.导出图片

4.1 改变尺寸

```matlab
set(gcf,'Units','centimeters','Position',[2 2 15 8]);
```

4.2 去除留白

```matlab
set(gca,'LooseInset',[0 0 0 0]);
```

4.3 导出图片

```matlab
% 方法1
exportgraphics(gcf,'001.png','Resolution',600);
% 方法2
print('ex01','-dpng','-r600')
```

## 05.格网图

```matlab
% 数据
x=0:0.1:3;
y=0:0.1:4;
[X,Y]=meshgrid(x,y);
Z=peaks(X,Y);
% 平滑数据
K=(1/9)*ones(3);
Z=conv2(Z,K,'same');
% 绘图
surf(X,Y,Z);
view(0,90);
shading interp
xlabel('X');
ylabel('Y');
title('Title')
% 设置colorbar
colormap(jet);
h=colorbar;
h.FontSize=10;
h.Label.String='H (m)';
h.Label.Rotation=0;
h.Label.Position=[0.50,8.60,0];
h.Label.FontSize=10;
caxis([0,8]);
% 调节尺寸
set(gcf,'Units','centimeters','Position',[8 5 15 8]);
% 导出图片
exportgraphics(gcf,'001.png','Resolution',600);
```
<img src="..\..\_static\004.png" alt="005" style="zoom:10%;" />

## 06.相关性图

```matlab
% 加载数据
A=readtable('Sheet1.xlsx');
x=table2array(A(:,2));
y=table2array(A(:,3));
% 绘制散点图
hold on
scatter(x,y,5,'filled','MarkerFaceColor',[0.302 0.302 0.302]);
xlim([3,55])
ylim([50,300]);
% 绘制拟合曲线
p=polyfit(x,y,1);
a=p(1);
b=p(2);
x0=[0,60];
y0=[a*x0(1)+b,a*x0(2)+b];
plot(x0,y0,'-r','LineWidth',1.2);
% 计算相关系数
R=corrcoef(x,y);
R=sprintf('%.2f',R(1,2));
% 绘制文本框
h=annotation('textbox',[.15 .82 .099 .07],'String',['R=',R]);
h.FitBoxToText='on';
hold off
```

<img src="..\..\_static\014.png" alt="005" style="zoom:10%;" />

## 07.双Y轴图

```matlab
% 加载数据
x=1:100;
y1=01+rand(100,1);
y2=10+rand(100,1);
% Y1
yyaxis left
h=plot(x,y1,'LineWidth',1.2);
h.Color=[0.2157 0.4941 0.7216];
ax=gca;
ax.LineWidth=1.2;
ax.YColor=[0.2157 0.4941 0.7216];
ylim([0,5]);
ylabel('Y1');
% Y2
yyaxis right
h=plot(x,y2,'LineWidth',1.2);
h.Color=[0.8392 0.3765 0.302];
ax=gca;
ax.LineWidth=1.2;
ax.YColor=[0.8392 0.3765 0.302];
ylim([8,12]);
ylabel('Y2');
% X
xlabel('X');
legend('Line1','Line2');
% 调节尺寸
set(gcf,'Units','centimeters','Position',[2 2 15 8]);
% 导出图片
exportgraphics(gcf,'001.png','Resolution',600);
```

<img src="..\..\_static\005.png" alt="008" style="zoom:10%;" />

## 08.误差棒图

```matlab
% 构造数据
x=0:10:100;
y=[20 30 45 40 60 65 80 75 95 90 95];
err=[4 3 5 3 5 3 6 4 3 3 5];
% 绘图
b=errorbar(x,y,err,'Marker','.','LineStyle','-','CapSize',6,...
    'LineWidth',1,'MarkerSize',8,'Color',[0.5 0.5 0.5],...
    'MarkerEdgeColor',[0 0 0],'MarkerFaceColor',[0.9 0.9 0.9]);
xlabel('X');
ylabel('Y');
title('Title');
xlim([-10,110]);
ylim([0,110]);
% 调节尺寸
set(gcf,'Units','centimeters','Position',[2 2 15 8]);
% 导出图片
exportgraphics(gcf,'001.png','Resolution',600);
```

<img src="..\..\_static\006.png" alt="009" style="zoom:12%;" />

## 09.连续日变化图

```matlab
% 制作时间变量,时间范围:2012/01/01 06:00至2012/01/03 18:00
h=hours(0:2:23);
d1=datetime('2012-01-01');
d2=datetime('2012-01-02');
d3=datetime('2012-01-03');
T1=d1+h;
T2=d2+h;
T3=d3+h;
T=[T1(4:end),T2,T3(1:end-2)];
% 制作因变量
X=linspace(0,2*pi,length(T));
Y=sin(X);
% 绘图
hold on
box on
plot(datenum(T),Y,'LineWidth',1.2);
datetick('x','HH');
idx1=find(datetime(2012,01,02,00,00,00)==T);
idx2=find(datetime(2012,01,03,00,00,00)==T);
xline(datenum(T(idx1)),'LineWidth',1.2);
xline(datenum(T(idx2)),'LineWidth',1.2);
xlabel('Time');
ylabel('TEC');
title('Title');
set(gca,'LineWidth',1.2);
hold off
% 调节尺寸
set(gcf,'Units','centimeters','Position',[2 2 20 8]);
% 导出图片
exportgraphics(gcf,'001.png','Resolution',600);
```

<img src="..\..\_static\007.png" alt="010" style="zoom:10%;" />

## 10.子图

```matlab
% 绘制原图
x=0:0.01:10;
y=sin(10*x);
ax1=axes;
plot(ax1,x,y,'LineWidth',1);
ylim([-1,2.6]);
% 绘制子图
fig=ax1.Parent;
ax2=copyobj(ax1,fig);
set(ax2,'Position',[.5 .6 .3 .3],'XLim',[1.25,1.60],'YLim',[0.5,1.2]);
% 绘制选框
rec=rectangle(ax1,'Position',[ax2.XLim(1), ax2.YLim(1), diff(ax2.XLim), diff(ax2.YLim)]);
% 绘制连线(该部分不需要更改)
XLp=ax2.Position(1);
XRp=sum(ax2.Position([1,3]));
YDp=ax2.Position(2);
YUp=sum(ax2.Position([2,4]));
XLr=ax1.Position(1)+ax1.Position(3)/diff(ax1.XLim)*(rec.Position(1)-ax1.XLim(1));
XRr=ax1.Position(1)+ax1.Position(3)/diff(ax1.XLim)*(sum(rec.Position([1,3]))-ax1.XLim(1));
YDr=ax1.Position(2)+ax1.Position(4)/diff(ax1.YLim)*(rec.Position(2)-ax1.YLim(1));
YUr=ax1.Position(2)+ax1.Position(4)/diff(ax1.YLim)*(sum(rec.Position([2,4]))-ax1.YLim(1));
ano(1)=annotation('arrow',[0,0],[0,0]);
ano(2)=annotation('arrow',[0,0],[0,0]);
ano(3)=annotation('arrow',[0,0],[0,0]);
ano(4)=annotation('arrow',[0,0],[0,0]);
set(ano(1),'X',[XLr,XLp],'Y',[YDr,YDp],{'HeadLength','HeadWidth'},{0,0});
set(ano(2),'X',[XLr,XLp],'Y',[YUr,YUp],{'HeadLength','HeadWidth'},{0,0});
set(ano(3),'X',[XRr,XRp],'Y',[YDr,YDp],{'HeadLength','HeadWidth'},{0,0});
set(ano(4),'X',[XRr,XRp],'Y',[YUr,YUp],{'HeadLength','HeadWidth'},{0,0});
set(ano(1),'Visible','off');
set(ano(4),'Visible','off');
% 标签
xlabel('X');
ylabel('Y');
title('Title');
% 调节尺寸
set(gcf,'Units','centimeters','Position',[2 2 15 8]);
% 导出图片
exportgraphics(gcf,'003.png','Resolution',600)
```

<img src="..\..\_static\008.png" alt="011" style="zoom:12%;" />

## 11.堆叠图

```matlab
% 数据
X=categorical({'ohi3','yssk','brst','lkng','ihgt'});
X=reordercats(X,{'ohi3','yssk','brst','lkng','ihgt'});
A=[3,4,5
   5,6,3
   2,4,2
   3,4,5
   3,5,2];
% 绘图
ax=gca;
bar(X,A',0.6,'stacked');
ax.ColorOrder=[0.1059 0.6196 0.4667;0.2157 0.4941 0.7216;0.851 0.3725 0.0078];
ylim([0,15]);
ylabel('Num');
legend('1','2','3');
% 调整尺寸
set(gcf,'Units','centimeters','Position',[2 2 10 8]);
% 导出图片
exportgraphics(gcf,'001.png','Resolution',600);
```

<img src="..\..\_static\015.png" alt="011" style="zoom:12%;" />

## 12 普通柱状图

```
% 布局
h=tiledlayout(1,2);
h.TileSpacing='none';
h.Padding='compact'; 
% 图1
ax1=nexttile([1 1]);
b=bar([[18,20,30,17];[25,45,30,15]]);
b(1).FaceColor=[202,0,32]./255;
b(2).FaceColor=[244,165,130]./255;
b(3).FaceColor=[5,113,176]./255;
b(4).FaceColor=[146,197,222]./255;
legend('2008','2009','2012','2012','Location','northwest');
xticklabels({'before midnight','after midnight'});
xlabel('brst');
ylabel('Number');
ylim([0,60]);
ax1.FontSize=15;
% 图2
ax2=nexttile([1 1]);
b=bar([[15,40,30,10];[50,30,20,10]]);
b(1).FaceColor=[202,0,32]./255;
b(2).FaceColor=[244,165,130]./255;
b(3).FaceColor=[5,113,176]./255;
b(4).FaceColor=[146,197,222]./255;
xticklabels({'before midnight','after midnight'});
xlabel('yssk');
ax2.YTick=ax1.YTick;
yticklabels([]);
ylim([0,60]);
ax2.FontSize=15;
% 调整尺寸
set(gcf,'Units','centimeters','Position',[2 5 30 8]);
% 导出图片
exportgraphics(gcf,'001.png','Resolution',600);
```

<img src="..\..\_static\016.png" alt="011" style="zoom:12%;" />
